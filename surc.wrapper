#!/bin/sh
INPUT=$(echo "$LANG" | cut -d. -f1)
CHARMAP=$(echo "$LANG" | cut -d. -f2)
export LOCPATH="$SNAP_USER_COMMON/locale"

[ -d "$LOCPATH" ] || mkdir -p "$LOCPATH"
if [ ! -d "$LOCPATH/$INPUT.$CHARMAP" ]; then
    echo "Generating locale $LANG..."
    I18NPATH="$SNAP/usr/share/i18n" localedef -i "$INPUT" -f "$CHARMAP" "$LOCPATH/$INPUT.$CHARMAP"
fi

exec "$SNAP/surc.py" "$@"
